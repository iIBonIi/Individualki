#include <iostream>
#include <fstream>
#include <string>
#include <thread>
#include <chrono>

void send_data_to_server(const std::string& client_file, double weight, double height) {
    
    std::ofstream client_data(client_file, std::ios::trunc);
    if (client_data.is_open()) {
        client_data << weight << " " << height << std::endl;
    }
    else {
        std::cerr << "Не удалось открыть файл клиента." << std::endl;
    }
}

int main() {

    setlocale(LC_ALL, "RU");

    const std::string client_file = "client_data.txt";
    const std::string server_file = "server_response.txt";

    while (true) {
        double weight, height;
        std::cout << "Введите вес (кг): ";
        std::cin >> weight;
        std::cout << "Введите рост (см): ";
        std::cin >> height;

        send_data_to_server(client_file, weight, height);

        std::this_thread::sleep_for(std::chrono::seconds(2));

        std::ifstream server_response(server_file, std::ios::in);
        if (server_response.is_open()) {
            std::string line;
            std::getline(server_response, line);
            std::cout << line << std::endl;
        }
        else {
            std::cerr << "Не удалось открыть файл сервера." << std::endl;
        }
    }

    return 0;
}
