#include <iostream>
#include <fstream>
#include <string>
#include <thread>
#include <chrono>

using namespace std;

int main() {

    setlocale(LC_ALL, "Russian");

    double weight, height;

    cout << "Введите ваш вес (кг): ";
    cin >> weight;
    cout << "Введите ваш рост (м): ";
    cin >> height;

    ofstream clientFile("client_data.txt");
    if (!clientFile.is_open()) {
        cerr << "Не удалось создать файл для записи данных клиента." << endl;
        return -1;
    }
    clientFile << weight << " " << height << endl;
    clientFile.close();

    cout << "Данные отправлены на сервер. Ожидайте ответа..." << endl;

    while (!ifstream("server_response.txt").good()) {
        this_thread::sleep_for(chrono::seconds(1));
    }

    ifstream serverResponse("server_response.txt");
    if (!serverResponse.is_open()) {
        cerr << "Не удалось открыть файл с ответом сервера." << endl;
        return -1;
    }

    string response;
    string line;
    while (getline(serverResponse, line)) {
        response += line + "\n";
    }
    serverResponse.close();

    cout << "Ответ от сервера:\n" << response << endl;

    return 0;
}
